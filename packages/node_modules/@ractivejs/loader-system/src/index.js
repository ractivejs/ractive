import { toParts, toModule, replaceExtension } from '@ractivejs/utils-component'

export const translate = load => {
  const source = load.name.split('!').shift()
  const file = replaceExtension(source, '.js')
  const parts = toParts(load.source)
  const { code, map } = toModule({ source, file, parts })

  load.metadata.sourceMap = map

  return code
}
